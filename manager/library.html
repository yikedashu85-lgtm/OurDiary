<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>OurDiary Â· æ—¥è®°åº“</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f7f4; margin:0; }
header {
  height: 56px;
  background: #5b7052;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
}
header .title { font-weight: 600; }
header button {
  background: #fff;
  color: #5b7052;
  border: none;
  padding: 6px 14px;
  border-radius: 16px;
  cursor: pointer;
  font-size: 13px;
}
#diary-list { padding: 16px; }
.diary-item {
  background: #fff; margin-bottom: 8px; padding: 12px; border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08); cursor: pointer;
}
.diary-item:hover { background: #f0f0f0; }
</style>
</head>
<body>

<header>
  <div class="title">ğŸ“š æ—¥è®°åº“</div>
  <button onclick="window.location.href='index.html'">âœï¸ è¿”å›å†™ä½œ</button>
</header>

<div id="diary-list"></div>

<script>
const STORAGE_KEY = 'ourdiary_entries';
const diaryList = document.getElementById('diary-list');

function loadDiaries() {
  const data = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
  diaryList.innerHTML = '';
  Object.keys(data).sort((a,b)=>b.localeCompare(a)).forEach(k=>{
    const d = data[k];
    const div = document.createElement('div');
    div.className = 'diary-item';
    div.textContent = `${d.date.split('T')[0]} - ${d.author} - ${d.title}`;
    div.onclick = ()=>{
      window.location.href = 'index.html';
      setTimeout(()=>{
        const editor = window.opener?.document.getElementById('editor') || window.document.getElementById('editor');
        document.getElementById('title').value = d.title;
        document.getElementById('author').value = d.author;
        document.getElementById('date').value = d.date;
        editor.value = d.content;
        editor.dispatchEvent(new Event('input'));
      }, 50);
    };
    diaryList.appendChild(div);
  });
}

loadDiaries();
</script>
</body>
</html>
